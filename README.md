# Taximeter parser
Скрипт для сбора дополнительной статистики из Яндекс.Таксометр
### Установка

```sh
$ git clone https://github.com/tambovchanin/taximeter.git taximeter
$ cd taximeter
$ npm install
```

Для запуска скрипта необходимо установить [Nightwatch.js](http://nightwatchjs.org/)

```sh
$ npm install nightwatch
```

### Конфигурация
После установки необходимых библиотек необходимо заполнить файл конфигурации. Для этого достаточно скопировать файл *config.sample.js* в файл *config.js*
В содержиммо файла конфигурации необходимо внести параметры аутентификации и исправить время смены. при необходимости

```js
module.exports = {
  // Логин для базы
  login: '',
  // Пароль для базы
  password: '',

  // Данные для выгрузки полученных данных на сервер
  api: {
    // URL для выгрузки данных на сервер через API
    url: '',
    // Токен аутентификации для выгрузки данных через API
    token: ''
  },

  // Таймаут для ожидания заверщения страницы (5 секнд).
  // Следует увеличть если Интернет соединение медленное или не стабильное
  timeout: 5000,

  // Таймаут между имитацией "действий пользователя" (0.5 секнды)
  // к нему прибавляется случайно от 0 до 1.5 секунд для имитации "пользователя"
  // Следует увеличть если Интернет соединение медленное или не стабильное
  wait: 500,

  // Базы в учетной записи для обхода каждоый и сбора данных
  bases: [
    'Vladimir',
    'Kaluga'
  ],

  // Параметры для выгрузки дневной смены
  day: {
    // Начало дневной смены
    from: '06:00',
    // Окончание дневной смены
    to: '20:00'
  },

  // Параметры для выгрузки ночной смены
  night: {
    // Начало ночной смены
    from: '18:00',
    // Окончание ночной смены
    to: '8:00'
  },

  // Сохрянять скриншоты страниц с которых производится выгрузка данных
  screenshots: false
};
```
### Запуск

```sh
$ nightwatch -c nightwatch.config.js [--date dd.mm.yyyy --period day|night --from 10:00 --to 15:00]

--date 07.07.2019 - указать дату для выгрузки
--period day - период выгрузки день (day) или ночь (night)
--from 10:00 - указать начало периода
--to 15:00 - указать окончание периода
```
